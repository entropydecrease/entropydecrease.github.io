{"version":3,"sources":["file:///Users/xiaojf/personal/OneDrive/private/blog/entropydecrease/themes/hugo-narrow/assets/js/search.js"],"sourcesContent":["/**\n * 搜索功能模块\n *\n * 提供全站搜索功能，支持键盘导航和高亮显示\n *\n */\n\n(function () {\n  \"use strict\";\n\n  // DOM 元素\n  let searchModal = null;\n  let searchOverlay = null;\n  let searchInput = null;\n  let searchClear = null;\n  let searchClose = null;\n  let searchResults = null;\n  let searchEmpty = null;\n  let searchLoading = null;\n  let searchNoResults = null;\n  let searchResultsList = null;\n  let searchStats = null;\n  let searchItems = null;\n\n  // 状态变量\n  let isModalVisible = false;\n  let searchData = null;\n  let currentResults = [];\n  let selectedIndex = -1;\n  let searchTimeout = null;\n\n  // 初始化\n  function init() {\n    // 获取 DOM 元素\n    searchModal = document.getElementById(\"search-modal\");\n    searchOverlay = document.getElementById(\"search-overlay\");\n    searchInput = document.getElementById(\"search-input\");\n    searchClear = document.getElementById(\"search-clear\");\n    searchClose = document.getElementById(\"search-close\");\n    searchResults = document.getElementById(\"search-results\");\n    searchEmpty = document.getElementById(\"search-empty\");\n    searchLoading = document.getElementById(\"search-loading\");\n    searchNoResults = document.getElementById(\"search-no-results\");\n    searchResultsList = document.getElementById(\"search-results-list\");\n    searchStats = document.getElementById(\"search-stats\");\n    searchItems = document.getElementById(\"search-items\");\n\n    // 检查是否有搜索模态框\n    if (!searchModal) {\n      return;\n    }\n\n    // 绑定事件\n    bindEvents();\n\n    // 预加载搜索数据\n    loadSearchData();\n  }\n\n  // 绑定事件\n  function bindEvents() {\n    // 关闭按钮\n    if (searchClose) {\n      searchClose.addEventListener(\"click\", hideSearch);\n    }\n\n    // 清空按钮\n    if (searchClear) {\n      searchClear.addEventListener(\"click\", clearSearch);\n    }\n\n    // 点击遮罩层关闭\n    if (searchOverlay) {\n      searchOverlay.addEventListener(\"click\", hideSearch);\n    }\n\n    // 输入框事件\n    if (searchInput) {\n      searchInput.addEventListener(\"input\", handleInput);\n      searchInput.addEventListener(\"keydown\", handleKeydown);\n    }\n\n    // 全局键盘事件\n    document.addEventListener(\"keydown\", handleGlobalKeydown);\n\n    // 搜索结果点击事件\n    if (searchItems) {\n      searchItems.addEventListener(\"click\", handleResultClick);\n    }\n  }\n\n  // 处理全局键盘事件\n  function handleGlobalKeydown(e) {\n    // Ctrl/Cmd + K 打开搜索\n    if ((e.ctrlKey || e.metaKey) \u0026\u0026 e.key === \"k\") {\n      e.preventDefault();\n      showSearch();\n      return;\n    }\n\n    // ESC 关闭搜索\n    if (e.key === \"Escape\" \u0026\u0026 isModalVisible) {\n      hideSearch();\n      return;\n    }\n  }\n\n  // 处理输入框键盘事件\n  function handleKeydown(e) {\n    if (!isModalVisible) return;\n\n    switch (e.key) {\n      case \"ArrowDown\":\n        e.preventDefault();\n        navigateResults(1);\n        break;\n      case \"ArrowUp\":\n        e.preventDefault();\n        navigateResults(-1);\n        break;\n      case \"Enter\":\n        e.preventDefault();\n        selectResult();\n        break;\n      case \"Escape\":\n        hideSearch();\n        break;\n    }\n  }\n\n  // 处理输入事件\n  function handleInput(e) {\n    const query = e.target.value.trim();\n\n    // 显示/隐藏清空按钮\n    toggleClearButton(query.length \u003e 0);\n\n    // 清除之前的搜索定时器\n    if (searchTimeout) {\n      clearTimeout(searchTimeout);\n    }\n\n    // 重置导航状态\n    resetNavigation();\n\n    // 防抖搜索\n    searchTimeout = setTimeout(() =\u003e {\n      if (query.length === 0) {\n        showEmptyState();\n      } else {\n        performSearch(query);\n      }\n    }, 300);\n  }\n\n  // 处理结果点击\n  function handleResultClick(e) {\n    const resultItem = e.target.closest(\"[data-url]\");\n    if (resultItem) {\n      const url = resultItem.dataset.url;\n      if (url) {\n        window.location.href = url;\n      }\n    }\n  }\n\n  // 显示搜索模态框\n  function showSearch() {\n    if (!searchModal || isModalVisible) return;\n\n    isModalVisible = true;\n\n    // 显示遮罩层和模态框\n    searchOverlay.classList.remove(\"opacity-0\", \"pointer-events-none\");\n    searchOverlay.classList.add(\"opacity-100\");\n\n    searchModal.classList.remove(\n      \"opacity-0\",\n      \"scale-95\",\n      \"pointer-events-none\",\n    );\n    searchModal.classList.add(\"opacity-100\", \"scale-100\");\n\n    // 防止背景滚动\n    document.body.style.overflow = \"hidden\";\n\n    // 聚焦输入框\n    setTimeout(() =\u003e {\n      if (searchInput) {\n        searchInput.focus();\n      }\n    }, 100);\n  }\n\n  // 隐藏搜索模态框\n  function hideSearch() {\n    if (!searchModal || !isModalVisible) return;\n\n    isModalVisible = false;\n\n    // 隐藏遮罩层和模态框\n    searchOverlay.classList.add(\"opacity-0\", \"pointer-events-none\");\n    searchOverlay.classList.remove(\"opacity-100\");\n\n    searchModal.classList.add(\"opacity-0\", \"scale-95\", \"pointer-events-none\");\n    searchModal.classList.remove(\"opacity-100\", \"scale-100\");\n\n    // 恢复背景滚动\n    document.body.style.overflow = \"\";\n\n    // 清空搜索内容和重置状态\n    clearSearchContent();\n    resetNavigation();\n  }\n\n  // 清空搜索内容\n  function clearSearchContent() {\n    if (searchInput) {\n      searchInput.value = \"\";\n    }\n    toggleClearButton(false);\n    showEmptyState();\n    currentResults = [];\n    selectedIndex = -1;\n  }\n\n  // 重置导航状态\n  function resetNavigation() {\n    // 移除之前的选中状态\n    const prevSelected =\n      searchItems \u0026\u0026 searchItems.querySelector(\".search-result-selected\");\n    if (prevSelected) {\n      prevSelected.classList.remove(\"search-result-selected\");\n    }\n    selectedIndex = -1;\n  }\n\n  // 清空搜索\n  function clearSearch() {\n    clearSearchContent();\n    if (searchInput) {\n      searchInput.focus();\n    }\n  }\n\n  // 切换清空按钮显示\n  function toggleClearButton(show) {\n    if (!searchClear) return;\n\n    if (show) {\n      searchClear.classList.remove(\"opacity-0\", \"pointer-events-none\");\n      searchClear.classList.add(\"opacity-100\");\n    } else {\n      searchClear.classList.add(\"opacity-0\", \"pointer-events-none\");\n      searchClear.classList.remove(\"opacity-100\");\n    }\n  }\n\n  // 显示空状态\n  function showEmptyState() {\n    hideAllStates();\n    resetNavigation();\n    if (searchEmpty) {\n      searchEmpty.classList.remove(\"hidden\");\n    }\n  }\n\n  // 显示加载状态\n  function showLoadingState() {\n    hideAllStates();\n    resetNavigation();\n    if (searchLoading) {\n      searchLoading.classList.remove(\"hidden\");\n    }\n  }\n\n  // 显示无结果状态\n  function showNoResultsState() {\n    hideAllStates();\n    resetNavigation();\n    if (searchNoResults) {\n      searchNoResults.classList.remove(\"hidden\");\n    }\n  }\n\n  // 显示结果列表\n  function showResultsList() {\n    hideAllStates();\n    if (searchResultsList) {\n      searchResultsList.classList.remove(\"hidden\");\n    }\n  }\n\n  // 隐藏所有状态\n  function hideAllStates() {\n    const states = [\n      searchEmpty,\n      searchLoading,\n      searchNoResults,\n      searchResultsList,\n    ];\n    states.forEach((state) =\u003e {\n      if (state) {\n        state.classList.add(\"hidden\");\n      }\n    });\n  }\n\n  // 加载搜索数据\n  async function loadSearchData() {\n    if (searchData) return searchData;\n\n    try {\n      \n      let indexURL = window.HUGO_SEARCH_CONFIG?.searchIndexURL || \"/index.json\";\n      indexURL = indexURL.replace(/['\"]/g, '').replace(/%22/g, '');\n\n      const response = await fetch(indexURL);\n\n      if (!response.ok) {\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n      }\n\n      const data = await response.json();\n\n      // 适配 insight.js 的数据结构\n      if (data \u0026\u0026 typeof data === \"object\") {\n        // 转换为我们需要的格式\n        const posts = data.posts || [];\n        searchData = posts.map((post) =\u003e ({\n          title: post.title,\n          content: post.text,\n          summary: post.text ? post.text.substring(0, 200) : \"\",\n          url: post.link,\n          date: \"\",\n          categories: [],\n          tags: [],\n        }));\n      } else {\n        searchData = [];\n      }\n\n      return searchData;\n    } catch (error) {\n      return [];\n    }\n  }\n\n  // 执行搜索\n  async function performSearch(query) {\n    showLoadingState();\n\n    try {\n      const data = await loadSearchData();\n      const results = searchInData(data, query);\n\n      currentResults = results;\n      // 重置导航索引但不设置选中状态\n      selectedIndex = -1;\n\n      if (results.length === 0) {\n        showNoResultsState();\n      } else {\n        displayResults(results, query);\n        showResultsList();\n      }\n    } catch (error) {\n      showNoResultsState();\n    }\n  }\n\n  // 解析关键词 - 基于 insight.js\n  function parseKeywords(keywords) {\n    return keywords\n      .split(\" \")\n      .filter((keyword) =\u003e {\n        return !!keyword;\n      })\n      .map((keyword) =\u003e {\n        return keyword.toLowerCase();\n      });\n  }\n\n  // 过滤函数 - 基于 insight.js，修复字段检查\n  function filter(keywords, obj, fields) {\n    const keywordArray = parseKeywords(keywords);\n    const containKeywords = keywordArray.filter((keyword) =\u003e {\n      const containFields = fields.filter((field) =\u003e {\n        if (!obj.hasOwnProperty(field) || !obj[field]) {\n          return false;\n        }\n        // 确保字段值是字符串\n        const fieldValue = String(obj[field]).toLowerCase();\n        if (fieldValue.indexOf(keyword) \u003e -1) {\n          return true;\n        }\n        return false;\n      });\n      if (containFields.length \u003e 0) {\n        return true;\n      }\n      return false;\n    });\n    return containKeywords.length === keywordArray.length;\n  }\n\n  // 权重计算函数 - 基于 insight.js，修复字段检查\n  function weight(keywords, obj, fields, weights) {\n    let value = 0;\n    parseKeywords(keywords).forEach((keyword) =\u003e {\n      const pattern = new RegExp(escapeRegExp(keyword), \"gim\"); // Global, Multi-line, Case-insensitive\n      fields.forEach((field, index) =\u003e {\n        if (obj.hasOwnProperty(field) \u0026\u0026 obj[field]) {\n          // 确保字段值是字符串\n          const fieldValue = String(obj[field]);\n          const matches = fieldValue.match(pattern);\n          value += matches ? matches.length * weights[index] : 0;\n        }\n      });\n    });\n    return value;\n  }\n\n  // 转义正则表达式特殊字符\n  function escapeRegExp(string) {\n    return string.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$\u0026\");\n  }\n\n  // 简化的搜索算法 - 适配 insight.js 数据结构\n  function searchInData(data, query) {\n    if (!query || query.trim() === \"\") {\n      return [];\n    }\n\n    const keywords = parseKeywords(query);\n    const results = [];\n\n    data.forEach((item, index) =\u003e {\n      let score = 0;\n      let hasMatch = false;\n\n      // 检查每个关键词\n      keywords.forEach((keyword) =\u003e {\n        const keywordLower = keyword.toLowerCase();\n\n        // 检查标题\n        if (item.title \u0026\u0026 item.title.toLowerCase().includes(keywordLower)) {\n          score += 10;\n          hasMatch = true;\n        }\n\n        // 检查内容 (insight.js 使用 content 字段)\n        if (item.content \u0026\u0026 item.content.toLowerCase().includes(keywordLower)) {\n          score += 1;\n          hasMatch = true;\n        }\n\n        // 检查摘要 (如果有的话)\n        if (item.summary \u0026\u0026 item.summary.toLowerCase().includes(keywordLower)) {\n          score += 5;\n          hasMatch = true;\n        }\n      });\n\n      if (hasMatch) {\n        results.push({\n          ...item,\n          score,\n          keywords,\n        });\n      }\n    });\n\n    // 按分数排序\n    const sortedResults = results.sort((a, b) =\u003e b.score - a.score);\n\n    return sortedResults;\n  }\n\n  // 显示搜索结果\n  function displayResults(results, query) {\n    if (!searchStats || !searchItems) return;\n\n    // 更新统计信息 - 从模板元素读取翻译\n    const statsTemplate = document.getElementById(\"search-stats\");\n    if (statsTemplate) {\n      const template = statsTemplate.dataset.template;\n      searchStats.textContent = template.replace('%d', results.length);\n    } else {\n      searchStats.textContent = `Found ${results.length} results`;\n    }\n\n    // 清空之前的结果\n    searchItems.innerHTML = \"\";\n\n    // 生成结果项\n    results.forEach((result, index) =\u003e {\n      const resultElement = createResultElement(result, query, index);\n      searchItems.appendChild(resultElement);\n    });\n  }\n\n  // 根据匹配度分数生成星星显示\n  function generateStarRating(score) {\n    if (!score || score \u003c= 0) return \"\";\n\n    // 定义星星数量的阈值\n    // 基于当前评分系统：标题匹配10分，摘要匹配5分，内容匹配1分\n    let starCount;\n    if (score \u003e= 20) {\n      starCount = 5; // 高匹配度：多个关键词在标题中匹配\n    } else if (score \u003e= 15) {\n      starCount = 4; // 较高匹配度：标题+摘要匹配\n    } else if (score \u003e= 10) {\n      starCount = 3; // 中等匹配度：标题匹配或多个摘要匹配\n    } else if (score \u003e= 5) {\n      starCount = 2; // 较低匹配度：摘要匹配\n    } else {\n      starCount = 1; // 低匹配度：仅内容匹配\n    }\n\n    // 生成星星字符串\n    return \"★\".repeat(starCount);\n  }\n\n  // 创建结果元素\n  function createResultElement(result, query, index) {\n    const div = document.createElement(\"div\");\n    div.className =\n      \"search-result-item p-4 cursor-pointer rounded-lg transition-all duration-200 ease-out hover:bg-primary/10 hover:text-primary\";\n    div.dataset.url = result.url;\n    div.dataset.index = index;\n\n    // 使用改进的高亮算法\n    const keywords = result.keywords || parseKeywords(query);\n\n    // 高亮标题\n    const highlightedTitle = highlightText(result.title, keywords);\n\n    // 高亮摘要，限制长度\n    const highlightedSummary = findAndHighlight(\n      result.summary || result.content,\n      keywords,\n      120,\n    );\n\n    // 生成星星评级显示\n    const starRating = generateStarRating(result.score);\n\n    div.innerHTML = `\n      \u003cdiv class=\"flex flex-col gap-2\"\u003e\n        \u003ch3 class=\"text-base font-semibold text-foreground line-clamp-1\"\u003e\n          ${highlightedTitle}\n        \u003c/h3\u003e\n        \u003cp class=\"text-sm text-muted-foreground line-clamp-2\"\u003e\n          ${highlightedSummary}\n        \u003c/p\u003e\n        \u003cdiv class=\"flex items-center gap-2 text-xs text-muted-foreground\"\u003e\n          \u003cspan\u003e${result.date}\u003c/span\u003e\n          ${\n            result.categories \u0026\u0026 result.categories.length \u003e 0\n              ? `\u003cspan\u003e•\u003c/span\u003e\u003cspan\u003e${result.categories[0]}\u003c/span\u003e`\n              : \"\"\n          }\n          ${starRating ? `\u003cspan style=\"color: #f59e0b;\"\u003e${starRating}\u003c/span\u003e` : \"\"}\n        \u003c/div\u003e\n      \u003c/div\u003e\n    `;\n\n    return div;\n  }\n\n  // 合并重叠的范围 - 基于 insight.js\n  function merge(ranges) {\n    let last;\n    const result = [];\n\n    ranges.forEach((r) =\u003e {\n      if (!last || r[0] \u003e last[1]) {\n        result.push((last = r));\n      } else if (r[1] \u003e last[1]) {\n        last[1] = r[1];\n      }\n    });\n\n    return result;\n  }\n\n  // 查找并高亮文本 - 基于 insight.js\n  function findAndHighlight(text, matches, maxlen) {\n    if (!Array.isArray(matches) || !matches.length || !text) {\n      return maxlen ? text.slice(0, maxlen) : text;\n    }\n\n    const testText = text.toLowerCase();\n    const indices = matches\n      .map((match) =\u003e {\n        const index = testText.indexOf(match.toLowerCase());\n        if (!match || index === -1) {\n          return null;\n        }\n        return [index, index + match.length];\n      })\n      .filter((match) =\u003e {\n        return match !== null;\n      })\n      .sort((a, b) =\u003e {\n        return a[0] - b[0] || a[1] - b[1];\n      });\n\n    if (!indices.length) {\n      return text;\n    }\n\n    let result = \"\";\n    let last = 0;\n    const ranges = merge(indices);\n    const sumRange = [ranges[0][0], ranges[ranges.length - 1][1]];\n\n    if (maxlen \u0026\u0026 maxlen \u003c sumRange[1]) {\n      last = sumRange[0];\n    }\n\n    for (let i = 0; i \u003c ranges.length; i++) {\n      const range = ranges[i];\n      result += text.slice(last, Math.min(range[0], sumRange[0] + maxlen));\n      if (maxlen \u0026\u0026 range[0] \u003e= sumRange[0] + maxlen) {\n        break;\n      }\n      result +=\n        '\u003cmark class=\"bg-primary/20 text-primary px-1 rounded font-medium\"\u003e' +\n        text.slice(range[0], range[1]) +\n        \"\u003c/mark\u003e\";\n      last = range[1];\n      if (i === ranges.length - 1) {\n        if (maxlen) {\n          result += text.slice(\n            range[1],\n            Math.min(text.length, sumRange[0] + maxlen + 1),\n          );\n        } else {\n          result += text.slice(range[1]);\n        }\n      }\n    }\n\n    return result;\n  }\n\n  // 高亮文本 - 使用改进的算法\n  function highlightText(text, keywords) {\n    if (!text || !keywords || !Array.isArray(keywords)) return text;\n    return findAndHighlight(text, keywords);\n  }\n\n  // 导航搜索结果 - 修复导航逻辑\n  function navigateResults(direction) {\n    // 检查是否有搜索结果\n    if (!currentResults || currentResults.length === 0) {\n      return;\n    }\n\n    // 确保 searchItems 存在\n    if (!searchItems) {\n      return;\n    }\n\n    // 移除之前的选中状态\n    const prevSelected = searchItems.querySelector(\".search-result-selected\");\n    if (prevSelected) {\n      prevSelected.classList.remove(\"search-result-selected\");\n    }\n\n    // 计算新的索引\n    if (selectedIndex === -1) {\n      // 首次导航\n      selectedIndex = direction \u003e 0 ? 0 : currentResults.length - 1;\n    } else {\n      selectedIndex += direction;\n      // 循环导航\n      if (selectedIndex \u003c 0) {\n        selectedIndex = currentResults.length - 1;\n      } else if (selectedIndex \u003e= currentResults.length) {\n        selectedIndex = 0;\n      }\n    }\n\n    // 添加新的选中状态\n    const newSelected = searchItems.querySelector(\n      `[data-index=\"${selectedIndex}\"]`,\n    );\n    if (newSelected) {\n      newSelected.classList.add(\"search-result-selected\");\n      // 滚动到可见区域\n      newSelected.scrollIntoView({\n        block: \"nearest\",\n        behavior: \"smooth\",\n      });\n    }\n  }\n\n  // 选择结果\n  function selectResult() {\n    if (selectedIndex \u003e= 0 \u0026\u0026 selectedIndex \u003c currentResults.length) {\n      const result = currentResults[selectedIndex];\n      if (result.url) {\n        window.location.href = result.url;\n      }\n    }\n  }\n\n  // 切换搜索显示状态\n  function toggleSearch() {\n    if (isModalVisible) {\n      hideSearch();\n    } else {\n      showSearch();\n    }\n  }\n\n  // 暴露全局方法\n  window.Search = {\n    show: showSearch,\n    hide: hideSearch,\n    toggle: toggleSearch,\n    isVisible: () =\u003e isModalVisible,\n  };\n\n  // 页面加载完成后初始化\n  if (document.readyState === \"loading\") {\n    document.addEventListener(\"DOMContentLoaded\", init);\n  } else {\n    init();\n  }\n})();\n"],"mappings":"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","names":[]}